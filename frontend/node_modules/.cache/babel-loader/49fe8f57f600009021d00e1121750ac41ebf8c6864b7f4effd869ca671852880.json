{"ast":null,"code":"var _jsxFileName = \"E:\\\\Cline\\\\allm\\\\frontend\\\\src\\\\components\\\\Notebook.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useMemo } from 'react';\nimport { Box, Typography, IconButton, Drawer, List, ListItem, ListItemText, ListItemSecondaryAction, Divider, Paper, Tooltip, Fab, TextField, Chip, Menu, MenuItem, InputAdornment, Button, Dialog, DialogTitle, DialogContent, DialogActions, Select, FormControl, InputLabel } from '@mui/material';\nimport { Close as CloseIcon, Save as SaveIcon, Delete as DeleteIcon, Edit as EditIcon, NoteAdd as NoteAddIcon, MenuBook as NotebookIcon, Search as SearchIcon, Label as LabelIcon, Share as ShareIcon, GetApp as ExportIcon, Upload as ImportIcon, Sort as SortIcon, Add as AddIcon } from '@mui/icons-material';\nimport { styled } from '@mui/material/styles';\nimport ReactMarkdown from 'react-markdown';\nimport { alpha } from '@mui/material/styles';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst StyledDrawer = styled(Drawer)(({\n  theme\n}) => ({\n  '& .MuiDrawer-paper': {\n    width: '400px',\n    maxWidth: '90vw',\n    backgroundColor: theme.palette.background.default,\n    borderLeft: `1px solid ${theme.palette.divider}`\n  }\n}));\nconst NotebookHeader = styled(Box)(({\n  theme\n}) => ({\n  padding: theme.spacing(2),\n  display: 'flex',\n  alignItems: 'center',\n  justifyContent: 'space-between',\n  borderBottom: `1px solid ${theme.palette.divider}`,\n  backgroundColor: theme.palette.background.paper\n}));\nconst NotebookContent = styled(Box)(({\n  theme\n}) => ({\n  height: 'calc(100vh - 64px)',\n  // Adjust based on header height\n  overflow: 'auto',\n  padding: theme.spacing(2)\n}));\n_c = NotebookContent;\nconst NotebookEntry = styled(Paper)(({\n  theme\n}) => ({\n  padding: theme.spacing(2),\n  marginBottom: theme.spacing(2),\n  backgroundColor: theme.palette.background.paper,\n  '&:hover': {\n    boxShadow: theme.shadows[4]\n  }\n}));\n_c2 = NotebookEntry;\nconst FloatingButton = styled(Fab)(({\n  theme\n}) => ({\n  position: 'fixed',\n  right: theme.spacing(3),\n  bottom: theme.spacing(3),\n  zIndex: theme.zIndex.drawer - 1\n}));\nconst EmptyState = styled(Box)(({\n  theme\n}) => ({\n  display: 'flex',\n  flexDirection: 'column',\n  alignItems: 'center',\n  justifyContent: 'center',\n  height: '100%',\n  padding: theme.spacing(3),\n  color: theme.palette.text.secondary,\n  '& svg': {\n    fontSize: 48,\n    marginBottom: theme.spacing(2),\n    opacity: 0.5\n  }\n}));\n_c3 = EmptyState;\nconst NotebookContainer = styled(Box)(({\n  theme\n}) => ({\n  position: 'fixed',\n  top: 0,\n  right: 0,\n  width: '400px',\n  height: '100vh',\n  backgroundColor: theme.palette.background.paper,\n  borderLeft: `1px solid ${theme.palette.divider}`,\n  boxShadow: theme.shadows[10],\n  display: 'flex',\n  flexDirection: 'column',\n  zIndex: theme.zIndex.drawer + 2,\n  transform: 'translateX(100%)',\n  transition: 'transform 0.3s ease-in-out, background-color 0.2s ease',\n  '&.open': {\n    transform: 'translateX(0)'\n  },\n  '&.drag-over': {\n    backgroundColor: alpha(theme.palette.primary.main, 0.1),\n    '& .MuiTypography-root': {\n      color: theme.palette.primary.main\n    }\n  }\n}));\n_c4 = NotebookContainer;\nfunction Notebook({\n  onClose,\n  isOpen\n}) {\n  _s();\n  const [notebooks, setNotebooks] = useState(() => {\n    const saved = localStorage.getItem('notebooks');\n    return saved ? JSON.parse(saved) : [{\n      id: 'default',\n      name: 'Default Notebook',\n      entries: []\n    }];\n  });\n  const [currentNotebookId, setCurrentNotebookId] = useState(() => {\n    const saved = localStorage.getItem('current-notebook');\n    return saved || 'default';\n  });\n  const [notebookDialogOpen, setNotebookDialogOpen] = useState(false);\n  const [notebookDialogMode, setNotebookDialogMode] = useState('add'); // 'add' or 'edit'\n  const [notebookDialogData, setNotebookDialogData] = useState({\n    name: ''\n  });\n  const [entries, setEntries] = useState(() => {\n    var _notebooks$find;\n    return ((_notebooks$find = notebooks.find(n => n.id === currentNotebookId)) === null || _notebooks$find === void 0 ? void 0 : _notebooks$find.entries) || [];\n  });\n  const [editMode, setEditMode] = useState(false);\n  const [selectedEntry, setSelectedEntry] = useState(null);\n  const [searchQuery, setSearchQuery] = useState('');\n  const [sortMenuAnchor, setSortMenuAnchor] = useState(null);\n  const [sortBy, setSortBy] = useState('timestamp');\n  const [sortDirection, setSortDirection] = useState('desc');\n  const [categories, setCategories] = useState(() => {\n    const saved = localStorage.getItem('notebook-categories');\n    return saved ? JSON.parse(saved) : ['General', 'Important', 'Code', 'Ideas'];\n  });\n  const [selectedCategory, setSelectedCategory] = useState('All');\n  const [editDialogOpen, setEditDialogOpen] = useState(false);\n  const [editingEntry, setEditingEntry] = useState(null);\n  const [isDragOver, setIsDragOver] = useState(false);\n  useEffect(() => {\n    localStorage.setItem('notebooks', JSON.stringify(notebooks));\n  }, [notebooks]);\n  useEffect(() => {\n    localStorage.setItem('current-notebook', currentNotebookId);\n  }, [currentNotebookId]);\n  useEffect(() => {\n    const handleAddToNotebook = event => {\n      const {\n        detail\n      } = event;\n      if (detail) {\n        setEntries(prev => [...prev, {\n          id: Date.now(),\n          ...detail,\n          category: 'General',\n          tags: [],\n          timestamp: new Date().toISOString()\n        }]);\n      }\n    };\n    window.addEventListener('addToNotebook', handleAddToNotebook);\n    return () => window.removeEventListener('addToNotebook', handleAddToNotebook);\n  }, []);\n  useEffect(() => {\n    setNotebooks(prev => prev.map(notebook => notebook.id === currentNotebookId ? {\n      ...notebook,\n      entries\n    } : notebook));\n  }, [entries, currentNotebookId]);\n  const currentNotebook = useMemo(() => notebooks.find(n => n.id === currentNotebookId) || notebooks[0], [notebooks, currentNotebookId]);\n  const handleDelete = entryId => {\n    setEntries(prev => prev.filter(entry => entry.id !== entryId));\n  };\n  const handleEdit = entry => {\n    setEditingEntry({\n      ...entry,\n      newContent: entry.content,\n      newCategory: entry.category || 'General',\n      newTags: entry.tags || []\n    });\n    setEditDialogOpen(true);\n  };\n  const handleSaveEdit = () => {\n    if (editingEntry) {\n      setEntries(prev => prev.map(entry => entry.id === editingEntry.id ? {\n        ...entry,\n        content: editingEntry.newContent,\n        category: editingEntry.newCategory,\n        tags: editingEntry.newTags,\n        lastEdited: new Date().toISOString()\n      } : entry));\n    }\n    setEditDialogOpen(false);\n    setEditingEntry(null);\n  };\n  const handleAddCategory = newCategory => {\n    if (newCategory && !categories.includes(newCategory)) {\n      setCategories(prev => [...prev, newCategory]);\n    }\n  };\n  const handleAddTag = (entryId, newTag) => {\n    setEntries(prev => prev.map(entry => entry.id === entryId ? {\n      ...entry,\n      tags: [...(entry.tags || []), newTag]\n    } : entry));\n  };\n  const handleExport = () => {\n    const exportData = {\n      entries,\n      categories,\n      version: '1.0'\n    };\n    const blob = new Blob([JSON.stringify(exportData, null, 2)], {\n      type: 'application/json'\n    });\n    const url = URL.createObjectURL(blob);\n    const a = document.createElement('a');\n    a.href = url;\n    a.download = `notebook-export-${new Date().toISOString()}.json`;\n    document.body.appendChild(a);\n    a.click();\n    document.body.removeChild(a);\n    URL.revokeObjectURL(url);\n  };\n  const handleImport = event => {\n    var _event$target$files;\n    const file = (_event$target$files = event.target.files) === null || _event$target$files === void 0 ? void 0 : _event$target$files[0];\n    if (file) {\n      const reader = new FileReader();\n      reader.onload = e => {\n        try {\n          const importedData = JSON.parse(e.target.result);\n          if (importedData.version && importedData.entries) {\n            setEntries(prev => [...prev, ...importedData.entries]);\n            if (importedData.categories) {\n              setCategories(prev => [...new Set([...prev, ...importedData.categories])]);\n            }\n          }\n        } catch (error) {\n          console.error('Error importing notebook:', error);\n        }\n      };\n      reader.readAsText(file);\n    }\n  };\n  const handleAddNotebook = () => {\n    setNotebookDialogData({\n      name: ''\n    });\n    setNotebookDialogMode('add');\n    setNotebookDialogOpen(true);\n  };\n  const handleEditNotebook = notebook => {\n    setNotebookDialogData({\n      id: notebook.id,\n      name: notebook.name\n    });\n    setNotebookDialogMode('edit');\n    setNotebookDialogOpen(true);\n  };\n  const handleDeleteNotebook = notebookId => {\n    if (notebooks.length === 1) {\n      // Don't allow deleting the last notebook\n      return;\n    }\n    setNotebooks(prev => {\n      const filtered = prev.filter(n => n.id !== notebookId);\n      if (currentNotebookId === notebookId) {\n        // If we're deleting the current notebook, switch to another one\n        setCurrentNotebookId(filtered[0].id);\n      }\n      return filtered;\n    });\n  };\n  const handleNotebookDialogSave = () => {\n    if (!notebookDialogData.name.trim()) return;\n    if (notebookDialogMode === 'add') {\n      const newNotebook = {\n        id: Date.now().toString(),\n        name: notebookDialogData.name.trim(),\n        entries: []\n      };\n      setNotebooks(prev => [...prev, newNotebook]);\n      setCurrentNotebookId(newNotebook.id);\n    } else {\n      setNotebooks(prev => prev.map(notebook => notebook.id === notebookDialogData.id ? {\n        ...notebook,\n        name: notebookDialogData.name.trim()\n      } : notebook));\n    }\n    setNotebookDialogOpen(false);\n  };\n  const filteredAndSortedEntries = entries.filter(entry => {\n    var _entry$metadata, _entry$metadata$model;\n    const matchesSearch = entry.content.toLowerCase().includes(searchQuery.toLowerCase()) || ((_entry$metadata = entry.metadata) === null || _entry$metadata === void 0 ? void 0 : (_entry$metadata$model = _entry$metadata.modelName) === null || _entry$metadata$model === void 0 ? void 0 : _entry$metadata$model.toLowerCase().includes(searchQuery.toLowerCase())) || (entry.tags || []).some(tag => tag.toLowerCase().includes(searchQuery.toLowerCase()));\n    const matchesCategory = selectedCategory === 'All' || entry.category === selectedCategory;\n    return matchesSearch && matchesCategory;\n  }).sort((a, b) => {\n    const aValue = sortBy === 'timestamp' ? a.timestamp : a.content;\n    const bValue = sortBy === 'timestamp' ? b.timestamp : b.content;\n    return sortDirection === 'desc' ? bValue.localeCompare(aValue) : aValue.localeCompare(bValue);\n  });\n  return /*#__PURE__*/_jsxDEV(NotebookContainer, {\n    className: `${isOpen ? 'open' : ''} ${isDragOver ? 'drag-over' : ''}`,\n    onDrop: e => {\n      e.preventDefault();\n      setIsDragOver(false);\n      try {\n        const jsonData = e.dataTransfer.getData('application/json');\n        if (jsonData) {\n          const data = JSON.parse(jsonData);\n          if (data.type === 'chat_message') {\n            const newEntry = {\n              id: Date.now(),\n              content: data.content,\n              timestamp: new Date().toISOString(),\n              metadata: data.metadata,\n              category: 'General',\n              tags: []\n            };\n            setEntries(prev => [...prev, newEntry]);\n          }\n        }\n      } catch (error) {\n        console.error('Error handling drop:', error);\n      }\n    },\n    onDragOver: e => {\n      e.preventDefault();\n      e.dataTransfer.dropEffect = 'copy';\n      if (!isDragOver) {\n        setIsDragOver(true);\n      }\n    },\n    onDragLeave: e => {\n      e.preventDefault();\n      setIsDragOver(false);\n    },\n    children: [/*#__PURE__*/_jsxDEV(Box, {\n      sx: {\n        display: 'flex',\n        justifyContent: 'space-between',\n        alignItems: 'center',\n        p: 2,\n        borderBottom: '1px solid',\n        borderColor: 'divider'\n      },\n      children: [/*#__PURE__*/_jsxDEV(Box, {\n        sx: {\n          display: 'flex',\n          alignItems: 'center',\n          gap: 1\n        },\n        children: [/*#__PURE__*/_jsxDEV(Typography, {\n          variant: \"h6\",\n          children: \"Notebook\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 393,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Tooltip, {\n          title: \"Add Entry\",\n          children: /*#__PURE__*/_jsxDEV(IconButton, {\n            size: \"small\",\n            onClick: handleAddNotebook,\n            children: /*#__PURE__*/_jsxDEV(AddIcon, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 396,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 395,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 394,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Tooltip, {\n          title: \"Export Notebook\",\n          children: /*#__PURE__*/_jsxDEV(IconButton, {\n            size: \"small\",\n            onClick: handleExport,\n            children: /*#__PURE__*/_jsxDEV(ExportIcon, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 401,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 400,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 399,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Tooltip, {\n          title: \"Import Notebook\",\n          children: /*#__PURE__*/_jsxDEV(IconButton, {\n            size: \"small\",\n            component: \"label\",\n            children: [/*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"file\",\n              hidden: true,\n              accept: \".json\",\n              onChange: handleImport\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 409,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(ImportIcon, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 415,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 405,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 404,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 392,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(IconButton, {\n        onClick: onClose,\n        size: \"small\",\n        children: /*#__PURE__*/_jsxDEV(CloseIcon, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 420,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 419,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 384,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(NotebookContent, {\n      children: filteredAndSortedEntries.length === 0 ? /*#__PURE__*/_jsxDEV(EmptyState, {\n        children: [/*#__PURE__*/_jsxDEV(NoteAddIcon, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 426,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Typography, {\n          variant: \"body1\",\n          children: searchQuery ? 'No entries match your search' : 'Your notebook is empty. Drag and drop messages here or use the \"Add to Notebook\" option in message menus.'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 427,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 425,\n        columnNumber: 11\n      }, this) : filteredAndSortedEntries.map(entry => /*#__PURE__*/_jsxDEV(NotebookEntry, {\n        elevation: 1,\n        children: [/*#__PURE__*/_jsxDEV(Box, {\n          sx: {\n            display: 'flex',\n            justifyContent: 'space-between',\n            mb: 1\n          },\n          children: [/*#__PURE__*/_jsxDEV(Box, {\n            children: [/*#__PURE__*/_jsxDEV(Typography, {\n              variant: \"caption\",\n              color: \"textSecondary\",\n              children: new Date(entry.timestamp).toLocaleString()\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 438,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(Chip, {\n              size: \"small\",\n              label: entry.category || 'General',\n              sx: {\n                ml: 1\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 441,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 437,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(Box, {\n            children: [/*#__PURE__*/_jsxDEV(Tooltip, {\n              title: \"Edit\",\n              children: /*#__PURE__*/_jsxDEV(IconButton, {\n                size: \"small\",\n                onClick: () => handleEdit(entry),\n                children: /*#__PURE__*/_jsxDEV(EditIcon, {\n                  fontSize: \"small\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 450,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 449,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 448,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(Tooltip, {\n              title: \"Delete\",\n              children: /*#__PURE__*/_jsxDEV(IconButton, {\n                size: \"small\",\n                onClick: () => handleDelete(entry.id),\n                children: /*#__PURE__*/_jsxDEV(DeleteIcon, {\n                  fontSize: \"small\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 455,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 454,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 453,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 447,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 436,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(ReactMarkdown, {\n          children: entry.content\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 460,\n          columnNumber: 15\n        }, this), entry.metadata && /*#__PURE__*/_jsxDEV(Typography, {\n          variant: \"caption\",\n          color: \"textSecondary\",\n          sx: {\n            mt: 1,\n            display: 'block'\n          },\n          children: [\"From: \", entry.metadata.modelName || 'Unknown Model']\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 462,\n          columnNumber: 17\n        }, this), entry.tags && entry.tags.length > 0 && /*#__PURE__*/_jsxDEV(Box, {\n          sx: {\n            mt: 1,\n            display: 'flex',\n            gap: 0.5,\n            flexWrap: 'wrap'\n          },\n          children: entry.tags.map(tag => /*#__PURE__*/_jsxDEV(Chip, {\n            label: tag,\n            size: \"small\",\n            variant: \"outlined\"\n          }, tag, false, {\n            fileName: _jsxFileName,\n            lineNumber: 469,\n            columnNumber: 21\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 467,\n          columnNumber: 17\n        }, this)]\n      }, entry.id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 435,\n        columnNumber: 13\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 423,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 347,\n    columnNumber: 5\n  }, this);\n}\n_s(Notebook, \"QzREsQBkBQLgDZ5X+07E6XKESN0=\");\n_c5 = Notebook;\nexport default Notebook;\nvar _c, _c2, _c3, _c4, _c5;\n$RefreshReg$(_c, \"NotebookContent\");\n$RefreshReg$(_c2, \"NotebookEntry\");\n$RefreshReg$(_c3, \"EmptyState\");\n$RefreshReg$(_c4, \"NotebookContainer\");\n$RefreshReg$(_c5, \"Notebook\");","map":{"version":3,"names":["React","useState","useEffect","useMemo","Box","Typography","IconButton","Drawer","List","ListItem","ListItemText","ListItemSecondaryAction","Divider","Paper","Tooltip","Fab","TextField","Chip","Menu","MenuItem","InputAdornment","Button","Dialog","DialogTitle","DialogContent","DialogActions","Select","FormControl","InputLabel","Close","CloseIcon","Save","SaveIcon","Delete","DeleteIcon","Edit","EditIcon","NoteAdd","NoteAddIcon","MenuBook","NotebookIcon","Search","SearchIcon","Label","LabelIcon","Share","ShareIcon","GetApp","ExportIcon","Upload","ImportIcon","Sort","SortIcon","Add","AddIcon","styled","ReactMarkdown","alpha","jsxDEV","_jsxDEV","StyledDrawer","theme","width","maxWidth","backgroundColor","palette","background","default","borderLeft","divider","NotebookHeader","padding","spacing","display","alignItems","justifyContent","borderBottom","paper","NotebookContent","height","overflow","_c","NotebookEntry","marginBottom","boxShadow","shadows","_c2","FloatingButton","position","right","bottom","zIndex","drawer","EmptyState","flexDirection","color","text","secondary","fontSize","opacity","_c3","NotebookContainer","top","transform","transition","primary","main","_c4","Notebook","onClose","isOpen","_s","notebooks","setNotebooks","saved","localStorage","getItem","JSON","parse","id","name","entries","currentNotebookId","setCurrentNotebookId","notebookDialogOpen","setNotebookDialogOpen","notebookDialogMode","setNotebookDialogMode","notebookDialogData","setNotebookDialogData","setEntries","_notebooks$find","find","n","editMode","setEditMode","selectedEntry","setSelectedEntry","searchQuery","setSearchQuery","sortMenuAnchor","setSortMenuAnchor","sortBy","setSortBy","sortDirection","setSortDirection","categories","setCategories","selectedCategory","setSelectedCategory","editDialogOpen","setEditDialogOpen","editingEntry","setEditingEntry","isDragOver","setIsDragOver","setItem","stringify","handleAddToNotebook","event","detail","prev","Date","now","category","tags","timestamp","toISOString","window","addEventListener","removeEventListener","map","notebook","currentNotebook","handleDelete","entryId","filter","entry","handleEdit","newContent","content","newCategory","newTags","handleSaveEdit","lastEdited","handleAddCategory","includes","handleAddTag","newTag","handleExport","exportData","version","blob","Blob","type","url","URL","createObjectURL","a","document","createElement","href","download","body","appendChild","click","removeChild","revokeObjectURL","handleImport","_event$target$files","file","target","files","reader","FileReader","onload","e","importedData","result","Set","error","console","readAsText","handleAddNotebook","handleEditNotebook","handleDeleteNotebook","notebookId","length","filtered","handleNotebookDialogSave","trim","newNotebook","toString","filteredAndSortedEntries","_entry$metadata","_entry$metadata$model","matchesSearch","toLowerCase","metadata","modelName","some","tag","matchesCategory","sort","b","aValue","bValue","localeCompare","className","onDrop","preventDefault","jsonData","dataTransfer","getData","data","newEntry","onDragOver","dropEffect","onDragLeave","children","sx","p","borderColor","gap","variant","fileName","_jsxFileName","lineNumber","columnNumber","title","size","onClick","component","hidden","accept","onChange","elevation","mb","toLocaleString","label","ml","mt","flexWrap","_c5","$RefreshReg$"],"sources":["E:/Cline/allm/frontend/src/components/Notebook.js"],"sourcesContent":["import React, { useState, useEffect, useMemo } from 'react';\nimport {\n  Box,\n  Typography,\n  IconButton,\n  Drawer,\n  List,\n  ListItem,\n  ListItemText,\n  ListItemSecondaryAction,\n  Divider,\n  Paper,\n  Tooltip,\n  Fab,\n  TextField,\n  Chip,\n  Menu,\n  MenuItem,\n  InputAdornment,\n  Button,\n  Dialog,\n  DialogTitle,\n  DialogContent,\n  DialogActions,\n  Select,\n  FormControl,\n  InputLabel,\n} from '@mui/material';\nimport {\n  Close as CloseIcon,\n  Save as SaveIcon,\n  Delete as DeleteIcon,\n  Edit as EditIcon,\n  NoteAdd as NoteAddIcon,\n  MenuBook as NotebookIcon,\n  Search as SearchIcon,\n  Label as LabelIcon,\n  Share as ShareIcon,\n  GetApp as ExportIcon,\n  Upload as ImportIcon,\n  Sort as SortIcon,\n  Add as AddIcon,\n} from '@mui/icons-material';\nimport { styled } from '@mui/material/styles';\nimport ReactMarkdown from 'react-markdown';\nimport { alpha } from '@mui/material/styles';\n\nconst StyledDrawer = styled(Drawer)(({ theme }) => ({\n  '& .MuiDrawer-paper': {\n    width: '400px',\n    maxWidth: '90vw',\n    backgroundColor: theme.palette.background.default,\n    borderLeft: `1px solid ${theme.palette.divider}`,\n  },\n}));\n\nconst NotebookHeader = styled(Box)(({ theme }) => ({\n  padding: theme.spacing(2),\n  display: 'flex',\n  alignItems: 'center',\n  justifyContent: 'space-between',\n  borderBottom: `1px solid ${theme.palette.divider}`,\n  backgroundColor: theme.palette.background.paper,\n}));\n\nconst NotebookContent = styled(Box)(({ theme }) => ({\n  height: 'calc(100vh - 64px)', // Adjust based on header height\n  overflow: 'auto',\n  padding: theme.spacing(2),\n}));\n\nconst NotebookEntry = styled(Paper)(({ theme }) => ({\n  padding: theme.spacing(2),\n  marginBottom: theme.spacing(2),\n  backgroundColor: theme.palette.background.paper,\n  '&:hover': {\n    boxShadow: theme.shadows[4],\n  },\n}));\n\nconst FloatingButton = styled(Fab)(({ theme }) => ({\n  position: 'fixed',\n  right: theme.spacing(3),\n  bottom: theme.spacing(3),\n  zIndex: theme.zIndex.drawer - 1,\n}));\n\nconst EmptyState = styled(Box)(({ theme }) => ({\n  display: 'flex',\n  flexDirection: 'column',\n  alignItems: 'center',\n  justifyContent: 'center',\n  height: '100%',\n  padding: theme.spacing(3),\n  color: theme.palette.text.secondary,\n  '& svg': {\n    fontSize: 48,\n    marginBottom: theme.spacing(2),\n    opacity: 0.5,\n  },\n}));\n\nconst NotebookContainer = styled(Box)(({ theme }) => ({\n  position: 'fixed',\n  top: 0,\n  right: 0,\n  width: '400px',\n  height: '100vh',\n  backgroundColor: theme.palette.background.paper,\n  borderLeft: `1px solid ${theme.palette.divider}`,\n  boxShadow: theme.shadows[10],\n  display: 'flex',\n  flexDirection: 'column',\n  zIndex: theme.zIndex.drawer + 2,\n  transform: 'translateX(100%)',\n  transition: 'transform 0.3s ease-in-out, background-color 0.2s ease',\n  '&.open': {\n    transform: 'translateX(0)',\n  },\n  '&.drag-over': {\n    backgroundColor: alpha(theme.palette.primary.main, 0.1),\n    '& .MuiTypography-root': {\n      color: theme.palette.primary.main,\n    }\n  }\n}));\n\nfunction Notebook({ onClose, isOpen }) {\n  const [notebooks, setNotebooks] = useState(() => {\n    const saved = localStorage.getItem('notebooks');\n    return saved ? JSON.parse(saved) : [{ id: 'default', name: 'Default Notebook', entries: [] }];\n  });\n  const [currentNotebookId, setCurrentNotebookId] = useState(() => {\n    const saved = localStorage.getItem('current-notebook');\n    return saved || 'default';\n  });\n  const [notebookDialogOpen, setNotebookDialogOpen] = useState(false);\n  const [notebookDialogMode, setNotebookDialogMode] = useState('add'); // 'add' or 'edit'\n  const [notebookDialogData, setNotebookDialogData] = useState({ name: '' });\n  const [entries, setEntries] = useState(() => {\n    return notebooks.find(n => n.id === currentNotebookId)?.entries || [];\n  });\n  const [editMode, setEditMode] = useState(false);\n  const [selectedEntry, setSelectedEntry] = useState(null);\n  const [searchQuery, setSearchQuery] = useState('');\n  const [sortMenuAnchor, setSortMenuAnchor] = useState(null);\n  const [sortBy, setSortBy] = useState('timestamp');\n  const [sortDirection, setSortDirection] = useState('desc');\n  const [categories, setCategories] = useState(() => {\n    const saved = localStorage.getItem('notebook-categories');\n    return saved ? JSON.parse(saved) : ['General', 'Important', 'Code', 'Ideas'];\n  });\n  const [selectedCategory, setSelectedCategory] = useState('All');\n  const [editDialogOpen, setEditDialogOpen] = useState(false);\n  const [editingEntry, setEditingEntry] = useState(null);\n  const [isDragOver, setIsDragOver] = useState(false);\n\n  useEffect(() => {\n    localStorage.setItem('notebooks', JSON.stringify(notebooks));\n  }, [notebooks]);\n\n  useEffect(() => {\n    localStorage.setItem('current-notebook', currentNotebookId);\n  }, [currentNotebookId]);\n\n  useEffect(() => {\n    const handleAddToNotebook = (event) => {\n      const { detail } = event;\n      if (detail) {\n        setEntries(prev => [...prev, {\n          id: Date.now(),\n          ...detail,\n          category: 'General',\n          tags: [],\n          timestamp: new Date().toISOString()\n        }]);\n      }\n    };\n\n    window.addEventListener('addToNotebook', handleAddToNotebook);\n    return () => window.removeEventListener('addToNotebook', handleAddToNotebook);\n  }, []);\n\n  useEffect(() => {\n    setNotebooks(prev => prev.map(notebook =>\n      notebook.id === currentNotebookId\n        ? { ...notebook, entries }\n        : notebook\n    ));\n  }, [entries, currentNotebookId]);\n\n  const currentNotebook = useMemo(() => \n    notebooks.find(n => n.id === currentNotebookId) || notebooks[0],\n    [notebooks, currentNotebookId]\n  );\n\n  const handleDelete = (entryId) => {\n    setEntries(prev => prev.filter(entry => entry.id !== entryId));\n  };\n\n  const handleEdit = (entry) => {\n    setEditingEntry({\n      ...entry,\n      newContent: entry.content,\n      newCategory: entry.category || 'General',\n      newTags: entry.tags || []\n    });\n    setEditDialogOpen(true);\n  };\n\n  const handleSaveEdit = () => {\n    if (editingEntry) {\n      setEntries(prev => prev.map(entry => \n        entry.id === editingEntry.id\n          ? {\n              ...entry,\n              content: editingEntry.newContent,\n              category: editingEntry.newCategory,\n              tags: editingEntry.newTags,\n              lastEdited: new Date().toISOString()\n            }\n          : entry\n      ));\n    }\n    setEditDialogOpen(false);\n    setEditingEntry(null);\n  };\n\n  const handleAddCategory = (newCategory) => {\n    if (newCategory && !categories.includes(newCategory)) {\n      setCategories(prev => [...prev, newCategory]);\n    }\n  };\n\n  const handleAddTag = (entryId, newTag) => {\n    setEntries(prev => prev.map(entry =>\n      entry.id === entryId\n        ? { ...entry, tags: [...(entry.tags || []), newTag] }\n        : entry\n    ));\n  };\n\n  const handleExport = () => {\n    const exportData = {\n      entries,\n      categories,\n      version: '1.0'\n    };\n    const blob = new Blob([JSON.stringify(exportData, null, 2)], { type: 'application/json' });\n    const url = URL.createObjectURL(blob);\n    const a = document.createElement('a');\n    a.href = url;\n    a.download = `notebook-export-${new Date().toISOString()}.json`;\n    document.body.appendChild(a);\n    a.click();\n    document.body.removeChild(a);\n    URL.revokeObjectURL(url);\n  };\n\n  const handleImport = (event) => {\n    const file = event.target.files?.[0];\n    if (file) {\n      const reader = new FileReader();\n      reader.onload = (e) => {\n        try {\n          const importedData = JSON.parse(e.target.result);\n          if (importedData.version && importedData.entries) {\n            setEntries(prev => [...prev, ...importedData.entries]);\n            if (importedData.categories) {\n              setCategories(prev => [...new Set([...prev, ...importedData.categories])]);\n            }\n          }\n        } catch (error) {\n          console.error('Error importing notebook:', error);\n        }\n      };\n      reader.readAsText(file);\n    }\n  };\n\n  const handleAddNotebook = () => {\n    setNotebookDialogData({ name: '' });\n    setNotebookDialogMode('add');\n    setNotebookDialogOpen(true);\n  };\n\n  const handleEditNotebook = (notebook) => {\n    setNotebookDialogData({ id: notebook.id, name: notebook.name });\n    setNotebookDialogMode('edit');\n    setNotebookDialogOpen(true);\n  };\n\n  const handleDeleteNotebook = (notebookId) => {\n    if (notebooks.length === 1) {\n      // Don't allow deleting the last notebook\n      return;\n    }\n\n    setNotebooks(prev => {\n      const filtered = prev.filter(n => n.id !== notebookId);\n      if (currentNotebookId === notebookId) {\n        // If we're deleting the current notebook, switch to another one\n        setCurrentNotebookId(filtered[0].id);\n      }\n      return filtered;\n    });\n  };\n\n  const handleNotebookDialogSave = () => {\n    if (!notebookDialogData.name.trim()) return;\n\n    if (notebookDialogMode === 'add') {\n      const newNotebook = {\n        id: Date.now().toString(),\n        name: notebookDialogData.name.trim(),\n        entries: []\n      };\n      setNotebooks(prev => [...prev, newNotebook]);\n      setCurrentNotebookId(newNotebook.id);\n    } else {\n      setNotebooks(prev => prev.map(notebook =>\n        notebook.id === notebookDialogData.id\n          ? { ...notebook, name: notebookDialogData.name.trim() }\n          : notebook\n      ));\n    }\n    setNotebookDialogOpen(false);\n  };\n\n  const filteredAndSortedEntries = entries\n    .filter(entry => {\n      const matchesSearch = entry.content.toLowerCase().includes(searchQuery.toLowerCase()) ||\n                          entry.metadata?.modelName?.toLowerCase().includes(searchQuery.toLowerCase()) ||\n                          (entry.tags || []).some(tag => tag.toLowerCase().includes(searchQuery.toLowerCase()));\n      const matchesCategory = selectedCategory === 'All' || entry.category === selectedCategory;\n      return matchesSearch && matchesCategory;\n    })\n    .sort((a, b) => {\n      const aValue = sortBy === 'timestamp' ? a.timestamp : a.content;\n      const bValue = sortBy === 'timestamp' ? b.timestamp : b.content;\n      return sortDirection === 'desc' ? \n        bValue.localeCompare(aValue) :\n        aValue.localeCompare(bValue);\n    });\n\n  return (\n    <NotebookContainer \n      className={`${isOpen ? 'open' : ''} ${isDragOver ? 'drag-over' : ''}`}\n      onDrop={(e) => {\n        e.preventDefault();\n        setIsDragOver(false);\n        try {\n          const jsonData = e.dataTransfer.getData('application/json');\n          if (jsonData) {\n            const data = JSON.parse(jsonData);\n            if (data.type === 'chat_message') {\n              const newEntry = {\n                id: Date.now(),\n                content: data.content,\n                timestamp: new Date().toISOString(),\n                metadata: data.metadata,\n                category: 'General',\n                tags: []\n              };\n              setEntries(prev => [...prev, newEntry]);\n            }\n          }\n        } catch (error) {\n          console.error('Error handling drop:', error);\n        }\n      }}\n      onDragOver={(e) => {\n        e.preventDefault();\n        e.dataTransfer.dropEffect = 'copy';\n        if (!isDragOver) {\n          setIsDragOver(true);\n        }\n      }}\n      onDragLeave={(e) => {\n        e.preventDefault();\n        setIsDragOver(false);\n      }}\n    >\n      <Box sx={{ \n        display: 'flex', \n        justifyContent: 'space-between', \n        alignItems: 'center',\n        p: 2,\n        borderBottom: '1px solid',\n        borderColor: 'divider'\n      }}>\n        <Box sx={{ display: 'flex', alignItems: 'center', gap: 1 }}>\n          <Typography variant=\"h6\">Notebook</Typography>\n          <Tooltip title=\"Add Entry\">\n            <IconButton size=\"small\" onClick={handleAddNotebook}>\n              <AddIcon />\n            </IconButton>\n          </Tooltip>\n          <Tooltip title=\"Export Notebook\">\n            <IconButton size=\"small\" onClick={handleExport}>\n              <ExportIcon />\n            </IconButton>\n          </Tooltip>\n          <Tooltip title=\"Import Notebook\">\n            <IconButton \n              size=\"small\" \n              component=\"label\"\n            >\n              <input\n                type=\"file\"\n                hidden\n                accept=\".json\"\n                onChange={handleImport}\n              />\n              <ImportIcon />\n            </IconButton>\n          </Tooltip>\n        </Box>\n        <IconButton onClick={onClose} size=\"small\">\n          <CloseIcon />\n        </IconButton>\n      </Box>\n      <NotebookContent>\n        {filteredAndSortedEntries.length === 0 ? (\n          <EmptyState>\n            <NoteAddIcon />\n            <Typography variant=\"body1\">\n              {searchQuery\n                ? 'No entries match your search'\n                : 'Your notebook is empty. Drag and drop messages here or use the \"Add to Notebook\" option in message menus.'}\n            </Typography>\n          </EmptyState>\n        ) : (\n          filteredAndSortedEntries.map((entry) => (\n            <NotebookEntry key={entry.id} elevation={1}>\n              <Box sx={{ display: 'flex', justifyContent: 'space-between', mb: 1 }}>\n                <Box>\n                  <Typography variant=\"caption\" color=\"textSecondary\">\n                    {new Date(entry.timestamp).toLocaleString()}\n                  </Typography>\n                  <Chip\n                    size=\"small\"\n                    label={entry.category || 'General'}\n                    sx={{ ml: 1 }}\n                  />\n                </Box>\n                <Box>\n                  <Tooltip title=\"Edit\">\n                    <IconButton size=\"small\" onClick={() => handleEdit(entry)}>\n                      <EditIcon fontSize=\"small\" />\n                    </IconButton>\n                  </Tooltip>\n                  <Tooltip title=\"Delete\">\n                    <IconButton size=\"small\" onClick={() => handleDelete(entry.id)}>\n                      <DeleteIcon fontSize=\"small\" />\n                    </IconButton>\n                  </Tooltip>\n                </Box>\n              </Box>\n              <ReactMarkdown>{entry.content}</ReactMarkdown>\n              {entry.metadata && (\n                <Typography variant=\"caption\" color=\"textSecondary\" sx={{ mt: 1, display: 'block' }}>\n                  From: {entry.metadata.modelName || 'Unknown Model'}\n                </Typography>\n              )}\n              {entry.tags && entry.tags.length > 0 && (\n                <Box sx={{ mt: 1, display: 'flex', gap: 0.5, flexWrap: 'wrap' }}>\n                  {entry.tags.map(tag => (\n                    <Chip\n                      key={tag}\n                      label={tag}\n                      size=\"small\"\n                      variant=\"outlined\"\n                    />\n                  ))}\n                </Box>\n              )}\n            </NotebookEntry>\n          ))\n        )}\n      </NotebookContent>\n    </NotebookContainer>\n  );\n}\n\nexport default Notebook; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}